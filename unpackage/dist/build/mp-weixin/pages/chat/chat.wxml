<view><cmd-nav-bar vue-id="1" title="{{room.roomTypeName}}" backgroundColor="#ff595c" fontColor="#fff" icon-one="back" icon-two="checkmore" data-event-opts="{{[['^iconOne',[['handleBack']]],['^iconTwo',[['handleMore']]]]}}" bind:iconOne="__e" bind:iconTwo="__e" bind:__l="__l"></cmd-nav-bar><view data-event-opts="{{[['touchstart',[['hideDrawer',['$event']]]]]}}" class="content" bindtouchstart="__e"><block wx:if="{{room.roomType==3}}"><view style="margin-top:112rpx;"><block wx:if="{{room.roomType==3}}"><view class="padding-sm"><view class="bg-grey2 padding radius text-center shadow-blur" style="z-index:99999;"><view class="text-lg">当前庄家</view><view class="margin-top-sm text-abc">{{room.userName?room.userName:'无'}}</view><block wx:if="{{room.userId&&room.userId!=mine.id}}"><button class="btn-up" disabled>已有庄家</button></block><block wx:else><button data-event-opts="{{[['tap',[['onTheVillage',['$event']]]]]}}" class="btn-up" bindtap="__e">{{room.userId==mine.id?'下庄':'上庄'}}</button></block></view></view></block></view></block><scroll-view class="msg-list" scroll-y="true" scroll-with-animation="{{scrollAnimation}}" scroll-top="{{scrollTop}}" scroll-into-view="{{scrollToView}}" upper-threshold="50" data-event-opts="{{[['scrolltoupper',[['loadHistory',['$event']]]]]}}" bindscrolltoupper="__e"><view class="loading" style="opacity:0;"><view class="spinner"><view class="rect1"></view><view class="rect2"></view><view class="rect3"></view><view class="rect4"></view><view class="rect5"></view></view></view><block wx:for="{{msgList}}" wx:for-item="row" wx:for-index="index" wx:key="index"><view class="row" id="{{'msg'+row.msg.id}}"><block wx:if="{{row.type=='system'}}"><block><view class="system"><block wx:if="{{row.msg.type=='text'}}"><view class="text">{{''+row.msg.content.text+''}}</view></block><block wx:if="{{row.msg.type=='redEnvelope'}}"><view class="red-envelope"><image src="/static/img/hongbao@2x.png"></image>{{''+row.msg.content.text+''}}</view></block></view></block></block><block wx:if="{{row.type=='user'}}"><block><block wx:if="{{row.msg.userinfo.uid==mine.id}}"><view class="my"><view class="left"><block wx:if="{{row.msg.type=='redEnvelope'}}"><view data-event-opts="{{[['tap',[['openRedEnvelope',['$0',index],[[['msgList','',index,'msg']]]]]]]}}" class="bubble red-envelope" bindtap="__e"><block wx:if="{{!row.msg.content.isRobed}}"><image src="/static/img/red-envelope.png"></image></block><block wx:else><image src="/static/img/hongbao@2x.png"></image></block><view class="tis"></view><view class="blessing">{{''+row.msg.content.blessing+''}}</view></view></block></view><view class="right"><image src="{{row.msg.userinfo.face}}"></image></view></view></block><block wx:if="{{row.msg.userinfo.uid!=mine.id}}"><view class="other"><view class="left"><image src="{{row.msg.userinfo.face}}"></image></view><view class="right"><view class="username"><view class="name">{{row.msg.userinfo.username}}</view><view class="time">{{row.msg.time}}</view></view><block wx:if="{{row.msg.type=='redEnvelope'}}"><view data-event-opts="{{[['tap',[['openRedEnvelope',['$0',index],[[['msgList','',index,'msg']]]]]]]}}" class="bubble red-envelope" bindtap="__e"><block wx:if="{{!row.msg.content.isRobed}}"><image src="/static/img/red-envelope.png"></image></block><block wx:else><image src="/static/img/hongbao@2x.png"></image></block><view class="tis"></view><view class="blessing">{{''+row.msg.content.blessing+''}}</view></view></block></view></view></block></block></block></view></block></scroll-view></view><view data-event-opts="{{[['touchmove',[['discard',['$event']]]]]}}" class="{{['popup-layer',popupLayerClass]}}" catchtouchmove="__e"><emotion class="{{[(hideEmoji)?'hidden':'']}}" bind:addEmoji="__e" vue-id="2" data-event-opts="{{[['^addEmoji',[['addEmoji']]]]}}" bind:__l="__l"></emotion><view class="{{['more-layer',(hideMore)?'hidden':'']}}"><view class="list"><view data-event-opts="{{[['tap',[['handRedEnvelopes',['$event']]]]]}}" class="box" bindtap="__e"><view class="icon hongbao"></view></view></view></view></view><view data-event-opts="{{[['touchmove',[['discard',['$event']]]]]}}" class="{{['input-box',popupLayerClass]}}" catchtouchmove="__e"><view class="voice"><view data-event-opts="{{[['tap',[['switchVoice',['$event']]]]]}}" class="{{['icon',isVoice?'jianpan':'hongbao']}}" bindtap="__e"></view></view><view class="textbox"><view data-event-opts="{{[['tap',[['handRedEnvelopes',['$event']]]]]}}" class="{{['voice-mode',isVoice?'':'hidden',recording?'recording':'']}}" bindtap="__e">{{voiceTis}}</view><view class="{{['text-mode',isVoice?'hidden':'']}}"><view class="box"><textarea disabled auto-height="true" data-event-opts="{{[['focus',[['textareaFocus',['$event']]]],['input',[['__set_model',['','textMsg','$event',[]]]]]]}}" value="{{textMsg}}" bindfocus="__e" bindinput="__e"></textarea></view><view class="em"><view class="icon biaoqing"></view></view></view></view><view data-event-opts="{{[['tap',[['showMore',['$event']]]]]}}" class="more" bindtap="__e"><view class="icon add"></view></view><view class="{{['send',isVoice?'hidden':'']}}" disabled><view class="btn">发送</view></view></view><view class="{{['cu-modal',subModalName=='onTheVillageModal'?'show':'']}}"><view class="cu-dialog"><view class="cu-form-group margin-top block"><view class="content"><view class="amount"><view class="num"><view class="text">上庄押金</view><view class="input"><input type="text" data-event-opts="{{[['input',[['__set_model',['$0','onTheVillageMoney','$event',[]],['onTheVillageInfo']]]]]}}" value="{{onTheVillageInfo.onTheVillageMoney}}" bindinput="__e"/></view></view></view></view></view><view class="cu-bar bg-white justify-end"><view class="action"><button data-event-opts="{{[['tap',[['hideSubModal',['$event']]]]]}}" class="cu-btn line-red text-red" bindtap="__e">取消</button><button data-event-opts="{{[['tap',[['toOnTheVillage',['$event']]]]]}}" class="cu-btn bg-red margin-left" bindtap="__e">确定</button></view></view></view></view><view class="{{['cu-modal',subModalName=='cashPledgeModal'?'show':'']}}"><view class="cu-dialog"><view class="cu-form-group margin-top block"><view class="content"><view class="amount"><view class="num"><view class="text">押金</view><view class="input"><input type="text" data-event-opts="{{[['input',[['__set_model',['','cashPledge','$event',[]]]]]]}}" value="{{cashPledge}}" bindinput="__e"/></view></view></view></view></view><view class="cu-bar bg-white justify-end"><view class="action"><button data-event-opts="{{[['tap',[['hideSubModal',['$event']]]]]}}" class="cu-btn line-red text-red" bindtap="__e">取消</button><button data-event-opts="{{[['tap',[['toOpenRedEnvelope',['$event']]]]]}}" class="cu-btn bg-red margin-left" bindtap="__e">确定</button></view></view></view></view><view class="{{['windows',windowsState]}}"><view data-event-opts="{{[['touchmove',[['discard',['$event']]]],['tap',[['closeRedEnvelope',['$event']]]]]}}" class="mask" catchtouchmove="__e" bindtap="__e"></view><view data-event-opts="{{[['touchmove',[['discard',['$event']]]]]}}" class="layer" catchtouchmove="__e"><view class="open-redenvelope"><view class="top"><view class="close-btn"><view data-event-opts="{{[['tap',[['closeRedEnvelope',['$event']]]]]}}" class="icon close" bindtap="__e"></view></view><image src="{{redenvelopeData.face}}"></image></view><view class="from">{{"来自"+redenvelopeData.rid}}</view><view class="blessing">{{redenvelopeData.blessing}}</view><view class="money">{{redenvelopeData.money}}</view><view data-event-opts="{{[['tap',[['toDetails',['$0'],['redenvelopeData.rid']]]]]}}" class="showDetails" bindtap="__e">查看领取详情<view class="icon to"></view></view></view></view></view></view>